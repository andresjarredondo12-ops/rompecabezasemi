<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Rompecabezas Frozen</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(#b3e5fc, #e1f5fe);
    text-align: center;
    overflow: hidden;
}

.hidden { display: none; }

input, button {
    padding: 10px;
    font-size: 16px;
    margin-top: 10px;
}

button {
    background: #0288d1;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

#board {
    position: relative;
    width: 300px;
    height: 300px;
    margin: 20px auto;
    border: 3px solid #0288d1;
    background: #e1f5fe;
}

.piece {
    position: absolute;
    width: 100px;
    height: 100px;
    cursor: grab;
    background-repeat: no-repeat;
}

/* Pantalla ganadora */
#winScreen {
    position: fixed;
    inset: 0;
    background: rgba(179,229,252,0.95);
    z-index: 999;
}

#winText {
    margin-top: 120px;
    font-size: 28px;
    color: #01579b;
}

/* Lluvia */
.fall {
    position: fixed;
    top: -40px;
    animation: fall linear infinite;
}

@keyframes fall {
    to { transform: translateY(110vh); }
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
    <h1>‚ùÑÔ∏è Rompecabezas Frozen ‚ùÑÔ∏è</h1>
    <p>Ingres√° tu nombre</p>
    <input id="username" placeholder="Tu nombre">
    <br>
    <button onclick="startGame()">Jugar</button>
</div>

<!-- JUEGO -->
<div id="game" class="hidden">
    <h2 id="playerName"></h2>
    <div id="board"></div>
</div>

<!-- GANASTE -->
<div id="winScreen" class="hidden">
    <div id="winText"></div>
</div>

<script>
/* =========================
   IM√ÅGENES FROZEN (REALES)
========================= */

const FROZEN_IMAGES = [
    "https://upload.wikimedia.org/wikipedia/en/0/05/Elsa_from_Frozen_II.png",
    "https://upload.wikimedia.org/wikipedia/en/3/3a/Anna_from_Frozen_II.png",
    "https://upload.wikimedia.org/wikipedia/en/6/6e/Olaf_from_Frozen.png"
];

const SIZE = 3;      // 3x3
const PIECE = 100;   // tama√±o pieza

let user = "";
let placedCorrectly = 0;
let board;

/* =========================
   INICIO
========================= */

function startGame() {
    user = document.getElementById("username").value.trim();
    if (!user) return alert("Ingres√° tu nombre");

    document.getElementById("login").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    document.getElementById("playerName").innerText = "Jugador: " + user;

    board = document.getElementById("board");
    loadPuzzle();
}

/* =========================
   PUZZLE
========================= */

function loadPuzzle() {
    board.innerHTML = "";
    placedCorrectly = 0;

    const img = FROZEN_IMAGES[Math.floor(Math.random() * FROZEN_IMAGES.length)];

    let positions = [];
    for (let y = 0; y < SIZE; y++) {
        for (let x = 0; x < SIZE; x++) {
            positions.push({x, y});
        }
    }

    positions.sort(() => Math.random() - 0.5);

    let index = 0;
    for (let y = 0; y < SIZE; y++) {
        for (let x = 0; x < SIZE; x++) {
            const piece = document.createElement("div");
            piece.className = "piece";

            piece.dataset.correctX = x;
            piece.dataset.correctY = y;

            piece.style.backgroundImage = `url(${img})`;
            piece.style.backgroundSize = `${SIZE * PIECE}px ${SIZE * PIECE}px`;
            piece.style.backgroundPosition = `-${x * PIECE}px -${y * PIECE}px`;

            piece.style.left = positions[index].x * PIECE + "px";
            piece.style.top = positions[index].y * PIECE + "px";

            makeDraggable(piece);
            board.appendChild(piece);
            index++;
        }
    }
}

/* =========================
   DRAG & DROP
========================= */

function makeDraggable(el) {
    let offsetX, offsetY;

    el.onmousedown = e => {
        offsetX = e.offsetX;
        offsetY = e.offsetY;

        document.onmousemove = move;
        document.onmouseup = drop;
    };

    el.ontouchstart = e => {
        const t = e.touches[0];
        const rect = el.getBoundingClientRect();
        offsetX = t.clientX - rect.left;
        offsetY = t.clientY - rect.top;

        document.ontouchmove = moveTouch;
        document.ontouchend = drop;
    };

    function move(e) {
        el.style.left = (e.pageX - offsetX - board.offsetLeft) + "px";
        el.style.top = (e.pageY - offsetY - board.offsetTop) + "px";
    }

    function moveTouch(e) {
        const t = e.touches[0];
        el.style.left = (t.pageX - offsetX - board.offsetLeft) + "px";
        el.style.top = (t.pageY - offsetY - board.offsetTop) + "px";
    }

    function drop() {
        document.onmousemove = null;
        document.onmouseup = null;
        document.ontouchmove = null;
        document.ontouchend = null;

        const x = Math.round(el.offsetLeft / PIECE);
        const y = Math.round(el.offsetTop / PIECE);

        el.style.left = x * PIECE + "px";
        el.style.top = y * PIECE + "px";

        if (x == el.dataset.correctX && y == el.dataset.correctY) {
            el.onmousedown = null;
            el.ontouchstart = null;
            placedCorrectly++;
            if (placedCorrectly === SIZE * SIZE) win();
        }
    }
}

/* =========================
   GANASTE
========================= */

function win() {
    document.getElementById("winScreen").classList.remove("hidden");
    document.getElementById("winText").innerText =
        `üéâ Felicidades ${user}, ganaste!!!! üéâ`;

    for (let i = 0; i < 60; i++) rain();
}

function rain() {
    const el = document.createElement("div");
    const icons = ["‚ù§Ô∏è", "üíó", "‚≠ê"];
    el.innerText = icons[Math.floor(Math.random() * icons.length)];
    el.className = "fall";
    el.style.left = Math.random() * 100 + "vw";
    el.style.fontSize = 18 + Math.random() * 22 + "px";
    el.style.animationDuration = 2 + Math.random() * 3 + "s";
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 5000);
}
</script>

</body>
</html>




